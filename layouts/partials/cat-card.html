{{ $cat := .cat }}
{{ $lang := .lang }}
{{ $cats := .cats }}
<div class="column is-12-tablet is-6-desktop">
  <div class="box cat-card" id="cat-{{ $cat.id }}" data-year="{{ substr $cat.birth 0 4 }}" data-birth="{{ $cat.birth }}" data-sterilized="{{ if $cat.sterilized }}yes{{ else }}no{{ end }}" data-treatment="{{ if (index $cat.treatment $lang) }}yes{{ else }}no{{ end }}">
    <article class="media">
      <figure class="media-left">
        <p class="image is-128x128">
          <img class="cat-photo" src="{{ $cat.photo }}" alt="{{ index $cat.name $lang }}">
        </p>
      </figure>
      <div class="media-content">
        <p class="title is-5">{{ index $cat.name $lang }}</p>
        <p class="subtitle is-6">{{ index $cat.description $lang }}</p>
        <p class="is-size-7">{{ i18n "age" }}: <span class="cat-age"></span></p>
        <div class="tags mt-2">
          <span class="tag {{ if $cat.sterilized }}is-success{{ else }}is-warning{{ end }}">
            {{ if $cat.sterilized }}{{ i18n "filterSterilized" }}{{ else }}{{ i18n "filterNotSterilized" }}{{ end }}
          </span>
          {{ $t := index $cat.treatment $lang }}
          {{ if $t }}<span class="tag is-danger">{{ $t }}</span>{{ end }}
          {{ range $cat.relatives }}
            {{ $relCat := index (where $cats "id" .id) 0 }}
            {{ if $relCat }}<span class="tag is-info cat-relative" data-target="cat-{{ $relCat.id }}">{{ index .relation $lang }}: {{ index $relCat.name $lang }}</span>{{ end }}
          {{ end }}
        </div>
      </div>
    </article>
  </div>
</div>
