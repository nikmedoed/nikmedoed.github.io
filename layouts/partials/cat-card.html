{{ $cat := .cat }}
{{ $lang := .lang }}
{{ $cats := .cats }}

<div class="column is-12-mobile is-6-tablet is-4-desktop">
  <article
    class="card cat-card"
    id="cat-{{ $cat.id }}"
    data-birth="{{ $cat.birth }}"
    data-sterilized="{{ if $cat.sterilized }}yes{{ else }}no{{ end }}"
    data-treatment="{{ if (index $cat.treatment $lang) }}yes{{ else }}no{{ end }}"
  >
    <!-- Photo block -->
    <div class="card-content p-0">
      <div class="cat-photo-frame">
        <img
          class="cat-photo"
          src="{{ $cat.photo }}"
          alt="{{ index $cat.name $lang }}"
          loading="lazy"
        />
      </div>

      <!-- Text content -->
      <div class="p-4 pt-3">
        <h3 class="title is-5 has-text-centered mb-0">
          {{ index $cat.name $lang }}
        </h3>
        <p class="has-text-centered is-size-6 mt-0 mb-3">
          <!-- Age text will be filled by JS from data-birth -->
          <span class="cat-age"></span>
        </p>

        <p class="content is-6 mb-3">
          {{ index $cat.description $lang }}
        </p>

        <!-- Tags -->
        <div class="tags is-centered is-flex-wrap-wrap mt-1">
          <!-- Binary examples -->
          {{ if $cat.sterilized }}
            <span class="tag is-success"> {{ i18n "filterSterilized" }} </span>
          {{ else }}
            <span class="tag is-warning"> {{ i18n "filterNotSterilized" }} </span>
          {{ end }}

          {{ $t := index $cat.treatment $lang }}
          {{ if $t }}
            <span class="tag is-danger is-light">{{ $t }}</span>
          {{ end }}

          <span class="tag is-light">
            {{ i18n (printf "gender%s" (title $cat.gender)) }}
          </span>

          <!-- Free-form tags list (optional) -->
          {{ range $tag := $cat.tags }}
            <span class="tag is-link is-light">{{ $tag }}</span>
          {{ end }}

          <!-- Родственников можно оставить кликабельными, если нужно -->
          {{ range $id := $cat.parents }}
            {{ $p := index (where $cats "id" $id) 0 }}
            {{ if $p }}
              {{ $key := cond (eq $p.gender "female") "mother" "father" }}
              <span class="tag is-info is-light cat-relative" data-target="cat-{{ $p.id }}">
                {{ i18n $key }}: {{ index $p.name $lang }}
              </span>
            {{ end }}
          {{ end }}
        </div>
      </div>
    </div>
  </article>
</div>
